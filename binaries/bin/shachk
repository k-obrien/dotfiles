#!/usr/bin/env zsh

source common

depend_on shasum

[[ "$#" -ne 3 ]] || [[ ! -f "$3" ]] && error_exit "Usage: shachk ALGORITHM CHECKSUM FILENAME"

directory=$(dirname "$3")
cd "$directory" || error_exit "Directory not found: $directory"

filename=$(basename "$3")
shasum -a "$1" -c <(echo "${2}  ${filename}")
